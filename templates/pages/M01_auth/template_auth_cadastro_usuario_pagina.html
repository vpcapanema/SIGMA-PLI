<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <meta content="SIGMA/PLI - Sistema de Gerenciamento de Cadastros" name="description">
  <meta content="VPC-GEOSER" name="author">
  <title>Cadastro de Usuário - SIGMA-PLI | Módulo de Gerenciamento de Cadastros</title>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700;800&display=swap"
    rel="stylesheet">

  <link href="/static/css/style_global_reset_base.css" rel="stylesheet">
  <link href="/static/css/M02_dashboard/style_dashboard_layout_base.css" rel="stylesheet">
  <link href="/static/css/M00_home/style_home_navigation.css" rel="stylesheet">
  <link href="/static/css/M01_auth/style_auth_cadastro_usuario.css" rel="stylesheet">
</head>

<body class="has-fixed-header cadastro-usuario__p-cadastro-usuario--body pli-form-page">
  <!-- SIGMA Header -->
  <header class="dashboard-header">
    <nav class="sigma-nav">
      <div class="header-brand">
        <span class="brand-title">SIGMA-PLI</span>
        <span class="brand-subtitle">Módulo de Gerenciamento de Cadastros</span>
      </div>
      <div class="nav-menu">
        <a href="/auth" class="nav-link">Início</a>
        <a href="/auth/login" class="nav-link">Login</a>
        <a href="/calendario" class="nav-link">Calendário</a>
        <a href="/" class="nav-link">Home SIGMA</a>
      </div>
    </nav>
  </header>

  <!-- Área Central -->
  <main class="flex-grow-1 py-5">
    <div class="container pli-main-content">
      <!-- Título da Página -->
      <div class="row mb-4">
        <div class="col-12 text-center">
          <h1 class="mb-0 pli-title">
            <i class="fas fa-user-plus me-2 text-pli-primary"></i>
            Cadastro de Usuário
          </h1>
          <p class="text-muted">Solicite seu acesso ao sistema PLI</p>
        </div>
      </div>

      <!-- Alerta Informativo -->
      <div class="row justify-content-center mb-4">
        <div class="col-12">
          <div class="alert alert-info">
            <i class="fas fa-info-circle me-2"></i>
            <strong>Importante:</strong>
            Preencha todos os campos obrigatórios para criar sua conta de usuário no sistema SIGMA-PLI.
          </div>
        </div>
      </div>

      <!-- Formulário -->
      <div class="row justify-content-center">
        <div class="col-12">
          <form id="usuarioPublicForm" novalidate="">
            <!-- Dados Pessoais -->
            <div class="form-section">
              <div class="form-section-header">
                <i class="fas fa-id-card me-2"></i>
                Dados Pessoais
              </div>
              <div class="form-section-body">
                <div class="row g-3">
                  <div class="col-md-12">
                    <label class="form-label cadastro-usuario__required-field--label" for="nome">Nome Completo</label>
                    <select class="form-select" id="nome" name="nome" required="">
                      <option value="">Selecione uma pessoa física cadastrada</option>
                    </select>
                    <div class="invalid-feedback">Por favor, selecione uma pessoa física.</div>
                    <div class="form-text">Selecione a pessoa física para vincular ao usuário.</div>
                  </div>
                  <div class="col-md-6">
                    <label class="form-label cadastro-usuario__required-field--label" for="email">E-mail Pessoal</label>
                    <input autocomplete="email" class="form-control" id="email" name="email" readonly required=""
                      type="email">
                    <div class="invalid-feedback">E-mail é obrigatório.</div>
                  </div>
                  <div class="col-md-6">
                    <label class="form-label cadastro-usuario__required-field--label" for="documento">CPF</label>
                    <input class="form-control" id="documento" name="documento" readonly required="" type="text">
                    <div class="invalid-feedback">CPF é obrigatório.</div>
                  </div>
                  <div class="col-md-6">
                    <label class="form-label cadastro-usuario__required-field--label" for="telefone">Telefone</label>
                    <input class="form-control" id="telefone" name="telefone" readonly required="" type="text">
                    <div class="invalid-feedback">Telefone é obrigatório.</div>
                  </div>
                  <div class="col-md-6">
                    <label class="form-label" for="data_nascimento">Data de Nascimento</label>
                    <input class="form-control" id="data_nascimento" name="data_nascimento" readonly type="date">
                  </div>
                  <input type="hidden" id="pessoa_fisica_id" name="pessoa_fisica_id">
                </div>
              </div>
            </div>

            <!-- Dados Profissionais -->
            <div class="form-section">
              <div class="form-section-header">
                <i class="fas fa-briefcase me-2"></i>
                Dados Profissionais
              </div>
              <div class="form-section-body">
                <div class="row g-3">
                  <div class="col-md-12">
                    <label class="form-label cadastro-usuario__required-field--label" for="instituicao_nome">
                      Instituição
                    </label>
                    <select class="form-select" id="instituicao_nome" name="instituicao_nome" required="">
                      <option value="">Selecione uma instituição</option>
                    </select>
                    <div class="invalid-feedback">Por favor, selecione uma instituição.</div>
                    <div class="form-text">Selecione a instituição à qual você está vinculado.</div>
                  </div>
                  <div class="col-md-6">
                    <label class="form-label cadastro-usuario__required-field--label" for="email_institucional">
                      E-mail Institucional
                    </label>
                    <input class="form-control" id="email_institucional" name="email_institucional" required=""
                      type="email" placeholder="seu.email@instituicao.gov.br">
                    <div class="invalid-feedback">Por favor, informe um e-mail institucional válido.</div>
                  </div>
                  <div class="col-md-6">
                    <label class="form-label" for="telefone_institucional">
                      Telefone Institucional
                    </label>
                    <input class="form-control" id="telefone_institucional" name="telefone_institucional" type="text"
                      placeholder="(00) 0000-0000">
                  </div>
                  <input type="hidden" id="instituicao_id" name="instituicao_id">
                </div>
              </div>
            </div>

            <!-- Dados de Acesso -->
            <div class="form-section">
              <div class="form-section-header">
                <i class="fas fa-lock me-2"></i>
                Dados de Acesso
              </div>
              <div class="form-section-body">
                <div class="row g-3">
                  <div class="col-md-12">
                    <label class="form-label cadastro-usuario__required-field--label" for="tipo_usuario">
                      Tipo de Usuário
                    </label>
                    <select aria-describedby="tipo-usuario-help" class="form-select" id="tipo_usuario"
                      name="tipo_usuario" required="">
                      <option value="">Selecione</option>
                      <option value="ADMIN">Administrador</option>
                      <option value="GESTOR">Gestor</option>
                      <option value="ANALISTA">Analista</option>
                      <option value="OPERADOR">Operador</option>
                      <option value="VISUALIZADOR">Visualizador</option>
                    </select>
                    <div class="invalid-feedback">Por favor, selecione um tipo de usuário.</div>
                    <div class="form-text" id="tipo-usuario-help">
                      Você pode ter até cinco usuários diferentes (um de cada tipo) com o mesmo CPF.
                    </div>
                  </div>
                  <div class="col-md-12">
                    <label class="form-label cadastro-usuario__required-field--label" for="username">
                      Nome de Usuário
                    </label>
                    <input class="form-control" id="username" name="username" readonly required="" type="text">
                    <div class="invalid-feedback">Nome de usuário é obrigatório.</div>
                    <div class="form-text">
                      Gerado automaticamente no formato: primeironome.ultimosobrenome_TIPOUSUARIO
                    </div>
                  </div>
                  <div class="col-md-6">
                    <label class="form-label cadastro-usuario__required-field--label" for="senha">Senha</label>
                    <div class="input-group">
                      <input aria-describedby="toggleSenha" autocomplete="new-password" class="form-control" id="senha"
                        name="senha" required="" type="password">
                      <button aria-label="Mostrar/ocultar senha" class="btn btn-outline-secondary" id="toggleSenha"
                        tabindex="-1" type="button">
                        <i class="fa fa-eye"></i>
                      </button>
                    </div>
                    <div class="password-strength" id="passwordStrength"></div>
                    <div class="password-strength-text" id="passwordStrengthText"></div>
                    <div class="invalid-feedback" id="senhaFeedback">
                      Por favor, crie uma senha forte.
                    </div>
                    <div class="form-text">
                      A senha deve conter pelo menos 8 caracteres, incluindo letras maiúsculas,
                      minúsculas, números e caracteres especiais.
                    </div>
                  </div>
                  <div class="col-md-6">
                    <label class="form-label cadastro-usuario__required-field--label" for="confirmarSenha">
                      Confirmar Senha
                    </label>
                    <div class="input-group">
                      <input aria-describedby="toggleConfirmarSenha" autocomplete="new-password" class="form-control"
                        id="confirmarSenha" name="confirmarSenha" required="" type="password">
                      <button aria-label="Mostrar/ocultar senha" class="btn btn-outline-secondary"
                        id="toggleConfirmarSenha" tabindex="-1" type="button">
                        <i class="fa fa-eye"></i>
                      </button>
                    </div>
                    <div class="invalid-feedback" id="confirmarSenhaFeedback">
                      As senhas não coincidem.
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Termos e Condições -->
            <div class="form-section">
              <div class="form-section-header">
                <i class="fas fa-file-signature me-2"></i>
                Termos e Condições
              </div>
              <div class="form-section-body">
                <div class="form-check mb-3">
                  <input class="form-check-input" id="termoPrivacidade" name="termo_privacidade" required=""
                    type="checkbox">
                  <label class="form-check-label" for="termoPrivacidade">
                    Li e concordo com a
                    <a data-bs-target="#privacidadeModal" data-bs-toggle="modal" href="#">
                      Política de Privacidade
                    </a>
                    *
                  </label>
                  <div class="invalid-feedback">
                    Você deve concordar com a política de privacidade.
                  </div>
                </div>
                <div class="form-check mb-3">
                  <input class="form-check-input" id="termoUso" name="termo_uso" required="" type="checkbox">
                  <label class="form-check-label" for="termoUso">
                    Li e concordo com os
                    <a data-bs-target="#termosModal" data-bs-toggle="modal" href="#">
                      Termos de Uso
                    </a>
                    *
                  </label>
                  <div class="invalid-feedback">Você deve concordar com os termos de uso.</div>
                </div>
                <div class="alert alert-warning">
                  <i class="fas fa-exclamation-triangle me-2"></i>
                  <small>
                    Ao solicitar acesso, você declara que as informações fornecidas são
                    verdadeiras e está ciente de que o uso indevido do sistema pode resultar em
                    sanções administrativas e legais.
                  </small>
                </div>
              </div>
            </div>

            <!-- Verificação de Segurança -->
            <div class="form-section">
              <div class="form-section-header">
                <i class="fas fa-shield-alt me-2"></i>
                Verificação de Segurança
              </div>
              <div class="form-section-body text-center">
                <div id="protection-container">
                  <!-- Verificação de Segurança será inserida automaticamente aqui pelo AntiBotProtection -->
                </div>
              </div>
            </div>

            <!-- Finalização do Cadastro -->
            <div class="form-section">
              <div class="form-section-header">
                <i class="fas fa-user-plus me-2"></i>
                Solicitar Acesso
              </div>
              <div class="form-section-body">
                <div class="d-flex gap-3">
                  <button class="btn btn-light btn-lg flex-fill border-2" id="auto_evt_898c1af1" type="button">
                    <i class="fas fa-home me-2"></i>
                    Voltar ao Início
                  </button>
                  <button class="btn btn-primary btn-lg flex-fill" type="submit">
                    <i class="fas fa-user-plus me-2"></i>
                    Solicitar Acesso
                  </button>
                </div>
              </div>
            </div>
          </form>
        </div>
      </div>
    </div>

    <!-- Toast Container -->
    <div class="toast-container" id="toastContainer"></div>

    <!-- Modal de Sucesso -->
    <div aria-hidden="true" class="modal fade" id="successModal" tabindex="-1">
      <div class="modal-dialog modal-lg">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title text-success">
              <i class="fas fa-check-circle me-2"></i>
              Solicitação Enviada com Sucesso
            </h5>
            <button aria-label="Fechar" class="btn-close" data-bs-dismiss="modal" type="button"></button>
          </div>
          <div class="modal-body">
            <div class="text-center mb-4">
              <i class="fas fa-check-circle text-success pli-icon-4rem"></i>
            </div>
            <div class="alert alert-success">
              <h4 class="alert-heading">Solicitação Recebida!</h4>
              <p>Sua solicitação de acesso foi recebida com sucesso!</p>
              <hr>
              <p class="mb-0">
                <strong>Protocolo:</strong>
                <span id="protocoloSolicitacao">PLI-XXXXXXXX</span>
              </p>
            </div>
            <div class="card mb-3">
              <div class="card-header bg-light">
                <h5 class="card-title mb-0">
                  <i class="fas fa-envelope me-2"></i>
                  Notificações
                </h5>
              </div>
              <div class="card-body">
                <p>
                  <i class="fas fa-paper-plane me-2 text-primary"></i>
                  Um email de confirmação foi
                  <span id="emailStatus">enviado</span>
                  para os endereços informados.
                </p>
                <p>
                  <i class="fas fa-file-alt me-2 text-primary"></i>
                  O comprovante da solicitação foi anexado ao email.
                </p>
              </div>
            </div>
            <div class="card mb-3">
              <div class="card-header bg-light">
                <h5 class="card-title mb-0">
                  <i class="fas fa-tasks me-2"></i>
                  Próximos Passos
                </h5>
              </div>
              <div class="card-body">
                <ol class="mb-0">
                  <li>
                    <strong>Etapa Atual:</strong>
                    <span class="badge bg-success">Solicitação Recebida</span>
                  </li>
                  <li>
                    <strong>Próxima Etapa:</strong>
                    <span class="badge bg-warning text-dark">Em Análise</span>
                    - Sua solicitação será analisada pelos administradores ou gestores do sistema.
                  </li>
                  <li>
                    <strong>Etapa Final:</strong>
                    <span class="badge bg-info">Aprovação/Rejeição</span>
                    - Você receberá um email com o resultado da análise.
                  </li>
                </ol>
              </div>
            </div>
            <div class="alert alert-info">
              <i class="fas fa-info-circle me-2"></i>
              O prazo médio para análise é de 2 dias úteis. Em caso de dúvidas, entre em contato
              pelo email
              <strong>pli.semil.sp@gmail.com</strong>
              .
            </div>
          </div>
          <div class="modal-footer">
            <a class="btn btn-primary btn-lg px-4" href="/">
              <i class="fas fa-home me-2"></i>
              Ir para Página Inicial
            </a>
          </div>
        </div>
      </div>
    </div>

    <!-- Modais de Política e Termos -->
    <div aria-hidden="true" class="modal fade" id="privacidadeModal" tabindex="-1">
      <div class="modal-dialog modal-lg">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">
              <i class="fas fa-shield-alt me-2"></i>
              Política de Privacidade
            </h5>
            <button aria-label="Fechar" class="btn-close" data-bs-dismiss="modal" type="button"></button>
          </div>
          <div class="modal-body">
            <h6>1. Coleta de Dados</h6>
            <p>Coletamos informações pessoais para fins de cadastro no sistema PLI.</p>
            <h6>2. Uso dos Dados</h6>
            <p>Seus dados serão utilizados exclusivamente para identificação, autenticação e comunicação.</p>
            <h6>3. Armazenamento</h6>
            <p>Seus dados são armazenados em servidores seguros.</p>
            <h6>4. Compartilhamento</h6>
            <p>Não compartilhamos seus dados com terceiros, exceto quando exigido por lei.</p>
            <h6>5. Seus Direitos</h6>
            <p>Você tem direito a acessar, corrigir e solicitar a exclusão dos seus dados (LGPD).</p>
          </div>
          <div class="modal-footer">
            <button class="btn btn-primary btn-lg px-4" data-bs-dismiss="modal">Entendi</button>
          </div>
        </div>
      </div>
    </div>

    <div aria-hidden="true" class="modal fade" id="termosModal" tabindex="-1">
      <div class="modal-dialog modal-lg">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">
              <i class="fas fa-file-contract me-2"></i>
              Termos de Uso
            </h5>
            <button aria-label="Fechar" class="btn-close" data-bs-dismiss="modal" type="button"></button>
          </div>
          <div class="modal-body">
            <h6>1. Aceitação dos Termos</h6>
            <p>Ao utilizar o Sistema PLI, você concorda com estes termos de uso.</p>
            <h6>2. Cadastro</h6>
            <p>Você é responsável por fornecer informações verdadeiras.</p>
            <h6>3. Uso do Sistema</h6>
            <p>O sistema deve ser utilizado apenas para os fins a que se destina.</p>
            <h6>4. Responsabilidades</h6>
            <p>Você é responsável por todas as atividades realizadas com seu cadastro.</p>
          </div>
          <div class="modal-footer">
            <button class="btn btn-primary btn-lg px-4" data-bs-dismiss="modal">Entendi</button>
          </div>
        </div>
      </div>
    </div>
  </main>

  <!-- FOOTER -->
  <footer class="login__l-footer--footer dashboard-footer">
    <div class="pli-footer pli-footer--compact">
      <div class="pli-footer__container container">
        <div class="pli-footer__content footer-content">
          <!-- Grupo 1: Logo e sistema -->
          <div class="pli-footer__group footer-section">
            <div class="pli-footer__logo">
              <i class="fas fa-building me-1"></i>
              SIGMA-Sistema de Gerenciamento de Cadastro
            </div>
          </div>
          <!-- Grupo 2: Links do footer -->
          <nav class="pli-footer__links footer-section">
            <a class="pli-footer__link" href="/auth/sobre">
              Sobre
            </a>
            <span class="pli-footer__sep">•</span>
            <a class="pli-footer__link" href="/contato">
              Contato
            </a>
            <span class="pli-footer__sep">•</span>
            <a class="pli-footer__link" href="/privacidade">
              Privacidade
            </a>
            <span class="pli-footer__sep">•</span>
            <a class="pli-footer__link" href="/termos">
              Termos
            </a>
          </nav>
        </div>
        <!-- Grupo 3: Copyright -->
        <div class="pli-footer__bottom footer-bottom">
          <div class="pli-footer__copyright">
            © 2025 SIGMA-PLI • Módulo de Gerenciamento de Cadastros
          </div>
        </div>
      </div>
    </div>
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <script src="/static/js/M01_auth/script_cadastro_usuario_novo.js"></script>
</body>

</html>