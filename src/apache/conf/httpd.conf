LoadModule proxy_module modules/mod_proxy.so
LoadModule proxy_http_module modules/mod_proxy_http.so
LoadModule headers_module modules/mod_headers.so

<VirtualHost *:80>
    ServerName localhost
    
    ProxyPreserveHost On
    
    # API Backend
    ProxyPass /api/ http://backend:8000/
    ProxyPassReverse /api/ http://backend:8000/
    
    # GeoServer
    ProxyPass /geoserver/ http://geoserver:8080/geoserver/
    ProxyPassReverse /geoserver/ http://geoserver:8080/geoserver/
    
    # Frontend
    DocumentRoot "/usr/local/apache2/htdocs"
    
    # Security Headers
    Header always set X-Content-Type-Options "nosniff"
    Header always set X-Frame-Options "SAMEORIGIN"
    Header always set X-XSS-Protection "1; mode=block"
    Header always set Referrer-Policy "strict-origin-when-cross-origin"
    
    ErrorLog /usr/local/apache2/logs/error.log
    CustomLog /usr/local/apache2/logs/access.log combined
</VirtualHost>
