{
  "version": "2.0.0",
  // ============================================================================
  // ‚ö†Ô∏è IMPORTANTE: Para iniciar ou reiniciar a aplica√ß√£o, use APENAS:
  //    - Pressione Ctrl+Shift+B
  //    OU
  //    - Terminal ‚Üí Run Task ‚Üí "‚ñ∂Ô∏è INICIAR APLICA√á√ÉO COMPLETA"
  //
  // N√ÉO execute manualmente "uvicorn" ou "python app.main:app"
  // A tarefa principal gerencia todo o ciclo: matar processos, iniciar servidor,
  // verificar conex√µes e abrir navegador automaticamente.
  // ============================================================================
  "tasks": [
    {
      "label": "‚ñ∂Ô∏è INICIAR APLICA√á√ÉO COMPLETA",
      "detail": "üöÄ Inicia a aplica√ß√£o de forma completa e segura: libera porta 8010, sobe FastAPI, verifica PostgreSQL e Neo4j, abre navegador. USE SEMPRE ESTA TAREFA! (Ctrl+Shift+B)",
      "type": "shell",
      "command": "Write-Host 'üîÑ [1/5] Liberando porta 8010...' -F Cyan; $p=Get-NetTCPConnection -LocalPort 8010 -EA SilentlyContinue; if($p){$p|%{Stop-Process -Id $_.OwningProcess -Force -EA SilentlyContinue}; Write-Host '‚úÖ Porta 8010 liberada' -F Green}else{Write-Host '‚úÖ Porta 8010 j√° estava livre' -F Yellow}; Write-Host 'üöÄ [2/5] Iniciando FastAPI...' -F Cyan; Start-Process -FilePath '${workspaceFolder}/.venv/Scripts/python.exe' -ArgumentList '-m','uvicorn','app.main:app','--host','127.0.0.1','--port','8010','--reload' -WindowStyle Hidden; Write-Host '‚è≥ [3/5] Aguardando servidor iniciar...' -F Cyan; Start-Sleep -Seconds 5; Write-Host 'üîç [4/5] Verificando conex√µes...' -F Cyan; try{$health=Invoke-RestMethod -Uri 'http://127.0.0.1:8010/health' -TimeoutSec 5; Write-Host ('‚úÖ PostgreSQL: ' + $health.postgres) -F Green; Write-Host ('‚úÖ Neo4j: ' + $health.neo4j) -F Green}catch{Write-Host '‚ö†Ô∏è Servidor ainda inicializando...' -F Yellow}; Write-Host 'üåê [5/5] Abrindo navegador...' -F Cyan; Start-Process 'http://127.0.0.1:8010/'; Write-Host '‚úÖ Aplica√ß√£o iniciada com sucesso!' -F Green",
      "group": {
        "kind": "build",
        "isDefault": true
      },
      "presentation": {
        "echo": true,
        "reveal": "always",
        "focus": true,
        "panel": "dedicated",
        "showReuseMessage": false
      },
      "problemMatcher": []
    },
    {
      "label": "Instalar depend√™ncias",
      "type": "shell",
      "command": "${workspaceFolder}/.venv/Scripts/python.exe",
      "args": ["-m", "pip", "install", "-r", "requirements.txt"],
      "group": "build",
      "presentation": {
        "echo": true,
        "reveal": "always",
        "focus": false,
        "panel": "new"
      },
      "problemMatcher": []
    },
    {
      "label": "Executar testes",
      "type": "shell",
      "command": "${workspaceFolder}/.venv/Scripts/python.exe",
      "args": ["-m", "pytest", "tests/", "-v"],
      "group": "test",
      "presentation": {
        "echo": true,
        "reveal": "always",
        "focus": false,
        "panel": "new"
      },
      "problemMatcher": []
    },
    {
      "label": "Testar Neo4j",
      "type": "shell",
      "command": "${workspaceFolder}/.venv/Scripts/python.exe",
      "args": ["test_neo4j_connection.py"],
      "group": "test",
      "presentation": {
        "echo": true,
        "reveal": "always",
        "focus": false,
        "panel": "shared"
      },
      "problemMatcher": []
    },
    {
      "label": "Formatar c√≥digo",
      "type": "shell",
      "command": "${workspaceFolder}/.venv/Scripts/python.exe",
      "args": ["-m", "black", "."],
      "group": "build",
      "presentation": {
        "echo": true,
        "reveal": "always",
        "focus": false,
        "panel": "shared"
      },
      "problemMatcher": []
    },
    {
      "label": "Lint c√≥digo",
      "type": "shell",
      "command": "${workspaceFolder}/.venv/Scripts/python.exe",
      "args": ["-m", "flake8", "."],
      "group": "build",
      "presentation": {
        "echo": true,
        "reveal": "always",
        "focus": false,
        "panel": "shared"
      },
      "problemMatcher": []
    }
  ]
}
